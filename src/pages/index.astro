---
import Layout from "../layouts/Layout.astro";
import Header from "../layouts/Header.astro";
import Three from "../layouts/Three.astro";
import Footer from "../layouts/Footer.astro";
import { colord } from "colord";

const lightColors = {
  a: "#4A4063",
  b: "#C6D4FF",
  c: "#C83E4D",
  d: "#D58936",
  e: "#44BBA4",
};

const lightModePalette = {
  title: lightColors.a,
  subdomain: "gray",
  footer: lightColors.b,
  bg: lightColors.b,
  header: lightColors.b,
  card: lightColors.b,
  text: "black",
  subtle: "black",
  subtitle: "black",
};

const darkColors = {
  a: "#373F47",
  b: "#EDF2F4",
  c: "#D1462F",
  d: "#939F5C",
  e: "#FFC53A",
};
const darkModePalette = {
  title: darkColors.b,
  subdomain: darkColors.e,
  bg: darkColors.a,
  footer: colord(darkColors.a).darken(0.15).toHex(),
  header: colord(darkColors.a).lighten(0.05).toHex(),
  card: colord(darkColors.a).lighten(0.05).toHex(),
  text: colord(darkColors.b).darken(0.1).toHex(),
  subtle: colord(darkColors.b).darken(0.25).toHex(),
  subtitle: colord(darkColors.b).darken(0.3).toHex(),
};
const palette = true ? darkModePalette : lightModePalette;

// TODO first 3
const posts = [
  {
    title: "",
    date: "2024-01-05",
    snippet: "ðŸ“ºðŸ•º",
    linkTo: "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
  },
];
---

<Layout title="home | barlo">
  <div style={{ backgroundColor: palette.bg, color: palette.text }}>
    <div class="flex flex-col min-h-screen leading-relaxed">
      <Header
        backgroundColor={palette.bg}
        titleColor={palette.title}
        subdomainColor={palette.subdomain}
      />
      <Three>
        <div class="flex flex-col gap-2">
          <h2 class="text-2xl">recent</h2>
          {
            posts.map((p) => (
              <article class="border pl-4 pr-4 pt-3 pb-3 rounded-md">
                <h3 class="text-lg hover:underline">
                  <a href={p.linkTo}>
                    {p.title} â€” {p.date}
                  </a>
                </h3>
                <p
                  class="leading-normal max-h-36 text-ellipsis break-words line-clamp-6 md:line-clamp-4"
                  style={{ wordBreak: "break-word" }}
                >
                  {p.snippet}
                </p>
                <a class="text-sm underline" href={p.linkTo}>
                  read more
                </a>
              </article>
            ))
          }
        </div>
      </Three>
      <Footer backgroundColor={palette.footer} iconColor={palette.text} />
    </div>
  </div>
</Layout>
